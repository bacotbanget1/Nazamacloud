<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NazamaCloud Super AI Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .chat-container {
            max-height: 600px;
            overflow-y: auto;
            scroll-behavior: smooth;
            background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .typing-indicator {
            display: inline-flex;
            align-items: center;
            padding: 16px 24px;
            background: #ffffff;
            border-radius: 20px;
            margin: 12px 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }
        
        .typing-dot {
            width: 10px;
            height: 10px;
            background: #4f46e5;
            border-radius: 50%;
            margin: 0 4px;
            animation: typing 1.6s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.3s; }
        .typing-dot:nth-child(3) { animation-delay: 0.6s; }
        .typing-dot:nth-child(4) { animation-delay: 0.9s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
            30% { transform: translateY(-8px); opacity: 1; }
        }
        
        .message {
            max-width: 90%;
            padding: 20px 24px;
            border-radius: 24px;
            margin: 16px 0;
            animation: fadeInSlide 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            line-height: 1.7;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            backdrop-filter: blur(10px);
        }
        
        .user-message {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 8px;
        }
        
        .bot-message {
            background: rgba(255, 255, 255, 0.95);
            color: #1f2937;
            margin-right: auto;
            border-bottom-left-radius: 8px;
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        
        .bot-message code {
            background: #f8fafc;
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'Fira Code', 'Monaco', monospace;
            font-size: 0.9em;
            border: 1px solid #e2e8f0;
        }
        
        .bot-message pre {
            background: #1f2937;
            color: #e5e7eb;
            padding: 16px;
            border-radius: 12px;
            overflow-x: auto;
            margin: 16px 0;
            font-family: 'Fira Code', 'Monaco', monospace;
            font-size: 0.85em;
            line-height: 1.5;
        }
        
        .bot-message table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .bot-message th {
            background: #4f46e5;
            color: white;
            font-weight: 600;
            padding: 12px;
            text-align: left;
        }
        
        .bot-message td {
            padding: 12px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .bot-message tr:hover {
            background: #f8fafc;
        }
        
        @keyframes fadeInSlide {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        
        .suggestion-chip {
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
        }
        
        .suggestion-chip:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 12px 40px rgba(79, 70, 229, 0.3);
        }
        
        .floating-element {
            animation: float 4s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .knowledge-badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .subject-card {
            transition: all 0.3s ease;
        }
        
        .subject-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .progress-bar {
            transition: width 2s ease-in-out;
        }
        
        .ai-thinking {
            background: conic-gradient(from 0deg, #4f46e5, #7c3aed, #4f46e5);
            animation: rotate 3s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .markdown-content h1 { font-size: 1.8em; font-weight: 800; margin: 24px 0 16px 0; color: #1f2937; }
        .markdown-content h2 { font-size: 1.5em; font-weight: 700; margin: 20px 0 12px 0; color: #374151; }
        .markdown-content h3 { font-size: 1.3em; font-weight: 600; margin: 16px 0 8px 0; color: #4b5563; }
        .markdown-content p { margin: 12px 0; }
        .markdown-content ul, .markdown-content ol { margin: 12px 0; padding-left: 24px; }
        .markdown-content li { margin: 6px 0; }
        .markdown-content blockquote { 
            border-left: 4px solid #4f46e5; 
            padding-left: 16px; 
            margin: 16px 0; 
            background: #f8fafc; 
            padding: 16px; 
            border-radius: 8px; 
        }
        
        .math-formula {
            background: #f8fafc;
            padding: 16px;
            border-radius: 12px;
            font-family: 'Cambria Math', serif;
            text-align: center;
            margin: 16px 0;
            border: 1px solid #e2e8f0;
        }
        
        .code-tabs {
            background: #1f2937;
            border-radius: 12px 12px 0 0;
            padding: 12px 16px;
            display: flex;
            gap: 8px;
        }
        
        .code-tab {
            padding: 8px 16px;
            background: #374151;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
        }
        
        .code-tab.active {
            background: #4f46e5;
        }
        
        .smart-response {
            border-left: 4px solid #10b981;
            background: linear-gradient(90deg, #f0fdf4, #ffffff);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 min-h-screen">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-gradient-to-br from-indigo-600 to-purple-700 flex items-center justify-center z-50">
        <div class="text-center text-white">
            <div class="w-24 h-24 mx-auto mb-6 relative">
                <div class="w-full h-full rounded-full ai-thinking absolute"></div>
                <div class="w-20 h-20 bg-indigo-700 rounded-full absolute top-2 left-2 flex items-center justify-center">
                    <i class="fas fa-brain text-3xl text-white"></i>
                </div>
            </div>
            <h2 class="text-2xl font-bold mb-2">Nazama Super AI</h2>
            <p class="text-indigo-200">Loading advanced intelligence system...</p>
            <div class="w-64 h-2 bg-indigo-800 rounded-full mt-4 mx-auto overflow-hidden">
                <div class="h-full bg-white progress-bar" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- API Key Modal -->
    <div id="apiKeyModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden backdrop-blur-sm">
        <div class="bg-white rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl glass-effect">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-key text-2xl text-white"></i>
                </div>
                <h2 class="text-2xl font-bold text-gray-800">OpenAI API Key</h2>
                <p class="text-gray-600 mt-2">Masukkan API Key untuk mengaktifkan kecerdasan super</p>
            </div>
            
            <input 
                type="password" 
                id="apiKeyInput" 
                placeholder="sk-...your-api-key..."
                class="w-full px-6 py-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-4 focus:ring-blue-500/30 focus:border-blue-500 mb-6 text-lg"
            >
            
            <div class="grid grid-cols-2 gap-4">
                <button 
                    onclick="useWithoutAPI()" 
                    class="px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-300 font-medium"
                >
                    Basic Mode
                </button>
                <button 
                    onclick="saveAPIKey()" 
                    class="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-medium shadow-lg"
                >
                    <i class="fas fa-rocket mr-2"></i>Aktifkan
                </button>
            </div>
            
            <div class="mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200">
                <p class="text-blue-800 text-sm">
                    <i class="fas fa-info-circle mr-2"></i>
                    Dapatkan API key dari 
                    <a href="https://platform.openai.com/api-keys" target="_blank" class="underline hover:text-blue-600 font-medium">
                        platform.openai.com
                    </a>
                </p>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-lg shadow-2xl sticky top-0 z-40 border-b border-gray-200/50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/62879b6d-7489-4b60-adff-12a2fd4dbe71.png" alt="NazamaCloud Logo - Modern cloud server company logo with futuristic design" class="w-16 h-16 rounded-2xl shadow-lg">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">Nazama Super AI</h1>
                        <p class="text-gray-600 text-sm">Advanced Intelligence • Multi-Disiplin • 24/7 Support</p>
                    </div>
                </div>
                
                <div class="flex items-center space-6">
                    <div class="hidden lg:flex items-center space-4">
                        <button onclick="showKnowledgePanel()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                            <i class="fas fa-graduation-cap mr-2"></i>Edukasi
                        </button>
                        <button onclick="showTechPanel()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                            <i class="fas fa-code mr-2"></i>Teknologi
                        </button>
                        <button onclick="showBusinessPanel()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                            <i class="fas fa-briefcase mr-2"></i>Bisnis
                        </button>
                    </div>
                    
                    <button 
                        onclick="showAPIKeyModal()" 
                        class="px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-lg flex items-center space-x-2 floating-element"
                    >
                        <i class="fas fa-key"></i>
                        <span>API Key</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <div class="lg:col-span-1 space-y-8">
                <!-- AI Status Card -->
                <div class="bg-white/80 backdrop-blur-lg rounded-3xl p-6 shadow-2xl border border-gray-100">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="font-bold text-gray-800 text-lg">Status Intelligence</h3>
                        <span id="aiStatus" class="bg-gradient-to-r from-green-100 to-green-200 text-green-800 px-4 py-2 rounded-full text-sm font-bold">
                            <i class="fas fa-circle mr-2 text-green-500"></i> SUPER AI
                        </span>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Mode:</span>
                            <span id="aiMode" class="bg-gradient-to-r from-purple-100 to-purple-200 text-purple-800 px-3 py-1 rounded-xl text-xs font-bold">OPENAI GPT-4</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Percakapan:</span>
                            <span id="messageCount" class="font-bold text-gray-800">0 pesan</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Knowledge Base:</span>
                            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">15.7M+ data</span>
                        </div>
                    </div>
                    
                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <div class="flex space-x-3">
                            <button onclick="resetChat()" class="flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors text-gray-700">
                                <i class="fas fa-redo mr-2"></i>Reset
                            </button>
                            <button onclick="exportConversation()" class="flex-1 px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-xl transition-colors text-blue-700">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quick Knowledge Access -->
                <div class="bg-white/80 backdrop-blur-lg rounded-3xl p-6 shadow-2xl border border-gray-100">
                    <h3 class="font-bold text-gray-800 text-lg mb-6">Akses Cepat Pengetahuan</h3>
                    
                    <div class="subject-grid">
                        <div class="subject-card bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-2xl text-center cursor-pointer" onclick="handleSuggestion('Jelaskan teori relativitas Einstein untuk siswa SMA')">
                            <i class="fas fa-atom text-2xl text-blue-600 mb-2"></i>
                            <p class="text-sm font-medium text-blue-800">Fisika</p>
                        </div>
                        <div class="subject-card bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-2xl text-center cursor-pointer" onclick="handleSuggestion('Jelaskan proses fotosintesis dan pentingnya bagi kehidupan')">
                            <i class="fas fa-seedling text-2xl text-green-600 mb-2"></i>
                            <p class="text-sm font-medium text-green-800">Biologi</p>
                        </div>
                        <div class="subject-card bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-2xl text-center cursor-pointer" onclick="handleSuggestion('Selesaikan persamaan kuadrat: 2x² + 5x - 3 = 0')">
                            <i class="fas fa-calculator text-2xl text-purple-600 mb-2"></i>
                            <p class="text-sm font-medium text-purple-800">Matematika</p>
                        </div>
                        <div class="subject-card bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-2xl text-center cursor-pointer" onclick="handleSuggestion('Jelaskan struktur atom dan tabel periodik unsur')">
                            <i class="fas fa-flask text-2xl text-red-600 mb-2"></i>
                            <p class="text-sm font-medium text-red-800">Kimia</p>
                        </div>
                    </div>
                    
                    <div class="mt-4 subject-grid">
                        <div class="subject-card bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-2xl text-center cursor-pointer" onclick="handleSuggestion('Buatkan code HTML/CSS/JS untuk website portfolio modern')">
                            <i class="fas fa-code text-2xl text-yellow-600 mb-2"></i>
                            <p class="text-sm font-medium text-yellow-800">Programming</p>
                        </div>
                        <div class="subject-card bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-2xl text-center cursor-pointer" onclick="handleSuggestion('Jelaskan cara setup server Minecraft dengan Docker')">
                            <i class="fas fa-server text-2xl text-indigo-600 mb-2"></i>
                            <p class="text-sm font-medium text-indigo-800">Server</p>
                        </div>
                        <div class="subject-card bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-2xl text-center cursor-pointer" onclick="handleSuggestion('Ajari saya dasar-dasar bahasa Inggris untuk percakapan')">
                            <i class="fas fa-language text-2xl text-pink-600 mb-2"></i>
                            <p class="text-sm font-medium text-pink-800">Bahasa</p>
                        </div>
                        <div class="subject-card bg-gradient-to-br from-gray-50 to-gray-100 p-4 rounded-2xl text-center cursor-pointer" onclick="handleSuggestion('Bantu saya memahami konsep ekonomi makro')">
                            <i class="fas fa-chart-line text-2xl text-gray-600 mb-2"></i>
                            <p class="text-sm font-medium text-gray-800">Ekonomi</p>
                        </div>
                    </div>
                </div>

                <!-- NazamaCloud Services -->
                <div class="bg-white/80 backdrop-blur-lg rounded-3xl p-6 shadow-2xl border border-gray-100">
                    <h3 class="font-bold text-gray-800 text-lg mb-6">Layanan NazamaCloud</h3>
                    
                    <div class="space-y-4">
                        <div class="suggestion-chip bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-2xl" onclick="handleSuggestion('Apa saja paket server Minecraft terbaik untuk bisnis gaming?')">
                            <div class="flex items-center">
                                <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center mr-3">
                                    <i class="fas fa-server text-white text-lg"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-blue-800">Server Minecraft</p>
                                    <p class="text-blue-600 text-xs">Hosting & Management</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="suggestion-chip bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-2xl" onclick="handleSuggestion('Bagaimana proses registrasi domain .id di NazamaCloud?')">
                            <div class="flex items-center">
                                <div class="w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center mr-3">
                                    <i class="fas fa-globe text-white text-lg"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-green-800">Domain Services</p>
                                    <p class="text-green-600 text-xs">Registration & DNS</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="suggestion-chip bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-2xl" onclick="handleSuggestion('Plugin Minecraft apa yang direkomendasikan untuk server SMP?')">
                            <div class="flex items-center">
                                <div class="w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center mr-3">
                                    <i class="fas fa-puzzle-piece text-white text-lg"></i>
                                </div>
                                <div>
                                    <p class="font-bold text-purple-800">Minecraft Plugins</p>
                                    <p class="text-purple-600 text-xs">Custom & Premium</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Container -->
            <div class="lg:col-span-3">
                <div class="bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl overflow-hidden border border-gray-100">
                    <!-- Chat Header -->
                    <div class="p-8 gradient-bg text-white">
                        <div class="flex items-center">
                            <div class="relative">
                                <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a780b964-5463-4a7d-ba41-01393d3ce55f.png" alt="Super AI Assistant - Advanced robot with neural network visualization" class="w-20 h-20 rounded-2xl border-4 border-white/30 shadow-lg">
                                <div class="absolute -top-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-2 border-white">
                                    <i class="fas fa-bolt text-white text-xs"></i>
                                </div>
                            </div>
                            <div class="ml-6">
                                <h3 class="font-bold text-3xl">Nazama Super AI</h3>
                                <p class="text-blue-100 text-lg">Advanced Multi-Disciplinary Intelligence System</p>
                                <div class="flex items-center space-x-4 mt-2">
                                    <span class="bg-white/20 px-3 py-1 rounded-full text-sm">SD-SMA</span>
                                    <span class="bg-white/20 px-3 py-1 rounded-full text-sm">Kuliah</span>
                                    <span class="bg-white/20 px-3 py-1 rounded-full text-sm">Programming</span>
                                    <span class="bg-white/20 px-3 py-1 rounded-full text-sm">Business</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Messages -->
                    <div class="chat-container p-8" id="chatMessages">
                        <div class="bot-message smart-response">
                            <div class="markdown-content">
                                <h2>🚀 Selamat Datang di Nazama Super AI!</h2>
                                <p>Saya adalah asisten AI cerdas yang didukung oleh teknologi OpenAI terbaru. Saya siap membantu Anda dalam berbagai bidang:</p>
                                
                                <h3>🎓 Pendidikan</h3>
                                <ul>
                                    <li><strong>SD-SMP-SMA:</strong> Matematika, Fisika, Kimia, Biologi, Bahasa</li>
                                    <li><strong>Kuliah:</strong> Teknik, Ekonomi, Kedokteran, Hukum, dll</li>
                                    <li><strong>Pelajaran Umum:</strong> Sejarah, Geografi, Seni, Musik</li>
                                </ul>
                                
                                <h3>💻 Teknologi</h3>
                                <ul>
                                    <li>Web Development (HTML, CSS, JavaScript, React, Node.js)</li>
                                    <li>Programming (Python, Java, C++, PHP, dll)</li>
                                    <li>Server Management & Cloud Computing</li>
                                    <li>Database & Networking</li>
                                </ul>
                                
                                <h3>🏢 Bisnis & Layanan NazamaCloud</h3>
                                <ul>
                                    <li>Setup & Troubleshooting Server Minecraft</li>
                                    <li>Registrasi & Management Domain</li>
                                    <li>Plugin Installation & Configuration</li>
                                    <li>Technical Support 24/7</li>
                                </ul>
                                
                                <blockquote>
                                    <strong>💡 Tips:</strong> Gunakan API Key OpenAI untuk akses ke kemampuan AI terbaru dengan respon yang lebih cerdas dan akurat!
                                </blockquote>
                                
                                <p>Apa yang bisa saya bantu untuk Anda hari ini?</p>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="p-8 bg-white/90 border-t border-gray-200">
                        <div class="flex space-x-6">
                            <div class="flex-1 relative">
                                <textarea 
                                    id="userInput" 
                                    placeholder="Tanyakan apapun: pelajaran sekolah, coding, server issues, atau bisnis..."
                                    rows="1"
                                    class="w-full px-8 py-6 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-4 focus:ring-blue-500/30 focus:border-blue-500 resize-none min-h-[80px] max-h-[200px] text-lg shadow-lg"
                                    onkeydown="handleTextareaKeydown(event)"
                                    oninput="autoResizeTextarea(this)"
                                ></textarea>
                                
                                <div class="absolute right-4 bottom-4 flex items-center space-x-3">
                                    <button 
                                        onclick="clearInput()" 
                                        class="p-3 text-gray-400 hover:text-gray-600 transition-colors rounded-full hover:bg-gray-100"
                                        title="Bersihkan input"
                                    >
                                        <i class="fas fa-times"></i>
                                    </button>
                                    <button 
                                        onclick="voiceInput()" 
                                        class="p-3 text-blue-500 hover:text-blue-700 transition-colors rounded-full hover:bg-blue-50"
                                        title="Input suara"
                                    >
                                        <i class="fas fa-microphone"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <button 
                                id="sendButton"
                                onclick="sendMessage()" 
                                class="self-end bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-10 py-6 rounded-2xl font-bold transition-all duration-300 flex items-center space-x-3 floating-element shadow-2xl"
                            >
                                <i class="fas fa-paper-plane text-xl"></i>
                                <span class="text-lg">Kirim</span>
                            </button>
                        </div>
                        
                        <div class="mt-6 flex items-center justify-between text-sm text-gray-600">
                            <div class="flex items-center space-x-6">
                                <span id="characterCount">0 karakter</span>
                                <span id="typingStatus" class="text-blue-600 font-medium"></span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-shield-alt text-green-500"></i>
                                <span>Secure • Intelligent • Reliable</span>
                                <i class="fas fa-bolt text-yellow-500"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Enhanced Configuration with comprehensive knowledge base
        const CONFIG = {
            openAI: {
                model: "gpt-4",
                temperature: 0.7,
                max_tokens: 2000
            },
            systemPrompts: {
                general: `Anda adalah Nazama Super AI, asisten AI cerdas dengan pengetahuan komprehensif di semua bidang:

**📚 PENDIDIKAN KOMPREHENSIF:**
- SD-SMP-SMA: Matematika, IPA (Fisika, Kimia, Biologi), IPS, Bahasa, Seni
- Kuliah: Teknik, Kedokteran, Hukum, Ekonomi, Sastra, dll
- Pendidikan Non-formal: Kursus, Pelatihan, Skill Development

**💻 TEKNOLOGI & PROGRAMMING:**
- Web Development: HTML, CSS, JavaScript, React, Vue, Node.js
- Programming: Python, Java, C++, PHP, Go, Rust
- Database: SQL, NoSQL, MongoDB, PostgreSQL
- DevOps: Docker, Kubernetes, CI/CD, Cloud Computing
- AI/ML: Machine Learning, Deep Learning, Data Science

**🏢 BISNIS & NAZAMACLOUD SERVICES:**
- Minecraft Server: Setup, Optimization, Troubleshooting
- Domain Services: Registration, DNS Management, Transfer
- Minecraft Plugins: Installation, Configuration, Custom Development
- Customer Support: Technical Issues, Billing, Account Management
- Business: Marketing, Sales, Customer Service

**🎯 CARA MENJAWAB:**
1. Gunakan Bahasa Indonesia yang jelas dan mudah dimengerti
2. Berikan jawaban yang akurat dan berbasis fakta
3. Sertakan contoh, analogi, dan penjelasan mendetail
4. Gunakan format Markdown untuk struktur yang baik
5. Untuk technical questions, berikan code examples
6. Untuk educational content, jelaskan step-by-step
7. Untuk business queries, berikan solusi praktis
8. Selalu tawarkan bantuan lebih lanjut

**⚠️ JIKA TIDAK TAHU:**
Jujur katakan dan tawarkan untuk mencari informasi lebih lanjut atau menghubungi tim spesialis.`,

                education: `Fokus pada konten edukasi dengan penjelasan mendetail, contoh, dan latihan.`,
                technology: `Berikan code examples, best practices, dan solusi teknis yang praktis.`,
                business: `Fokus pada solusi bisnis, customer service, dan technical support.`
            },
            fallbackResponses: [
                "Pertanyaan yang menarik! Saya akan melakukan research lebih mendalam tentang topik ini dan kembali dengan jawaban yang komprehensif.",
                "Topik ini membutuhkan penjelasan yang mendetail. Biar saya siapkan materi yang komprehensif untuk Anda.",
                "Saya sedang mengumpulkan informasi terbaru tentang hal ini. Mohon tunggu sebentar...",
                "Untuk memberikan jawaban yang akurat, saya perlu mengakses database knowledge terbaru. Sedang memproses..."
            ]
        };

        // Advanced state management
        let conversationHistory = [];
        let apiKey = localStorage.getItem('nazama_super_ai_key');
        let useOpenAI = !!apiKey;
        let currentMode = 'general';

        // Enhanced knowledge database for fallback mode
        const knowledgeDatabase = {
            // Extensive knowledge base would be implemented here
            // This is just a placeholder structure
        };

        // Initialize with advanced features
        document.addEventListener('DOMContentLoaded', function() {
            // Simulate loading progression
            const progressBar = document.querySelector('.progress-bar');
            let progress = 0;
            const loadingInterval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(loadingInterval);
                    setTimeout(() => {
                        document.getElementById('loadingScreen').style.display = 'none';
                    }, 500);
                }
                progressBar.style.width = progress + '%';
            }, 100);

            updateUIState();
            loadConversationHistory();
            
            if (!apiKey) {
                setTimeout(() => {
                    showAPIKeyModal();
                }, 2000);
            }
        });

        // Advanced textarea handling
        function autoResizeTextarea(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px';
            document.getElementById('characterCount').textContent = textarea.value.length + ' karakter';
        }

        function handleTextareaKeydown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function clearInput() {
            const input = document.getElementById('userInput');
            input.value = '';
            input.style.height = 'auto';
            document.getElementById('characterCount').textContent = '0 karakter';
        }

        function voiceInput() {
            // Placeholder for voice input functionality
            addMessage("Fitur voice input sedang dalam pengembangan. Silakan ketik pertanyaan Anda.", 'bot');
        }

        // Enhanced API Key management
        function showAPIKeyModal() {
            document.getElementById('apiKeyModal').classList.remove('hidden');
            document.getElementById('apiKeyInput').value = apiKey || '';
            document.getElementById('apiKeyInput').focus();
        }

        function hideAPIKeyModal() {
            document.getElementById('apiKeyModal').classList.add('hidden');
        }

        function saveAPIKey() {
            const key = document.getElementById('apiKeyInput').value.trim();
            if (key) {
                apiKey = key;
                localStorage.setItem('nazama_super_ai_key', apiKey);
                useOpenAI = true;
                updateUIState();
                hideAPIKeyModal();
                
                addMessage("🔓 API Key berhasil terhubung! Sekarang saya menggunakan OpenAI GPT-4 untuk memberikan respons super cerdas dengan akses ke pengetahuan terbaru. 🚀", 'bot');
            }
        }

        function useWithoutAPI() {
            useOpenAI = false;
            updateUIState();
            hideAPIKeyModal();
            
            addMessage("ℹ️ Mode basic diaktifkan. Saya akan menggunakan pengetahuan dasar. Untuk pengalaman super cerdas dengan akses ke AI terkini, silakan tambahkan API Key OpenAI.", 'bot');
        }

        function updateUIState() {
            const statusElement = document.getElementById('aiStatus');
            const modeElement = document.getElementById('aiMode');
            
            if (useOpenAI) {
                statusElement.innerHTML = '<i class="fas fa-circle mr-2 text-green-500"></i> SUPER AI ACTIVATED';
                statusElement.className = 'bg-gradient-to-r from-green-100 to-green-200 text-green-800 px-4 py-2 rounded-full text-sm font-bold';
                modeElement.textContent = 'OPENAI GPT-4';
                modeElement.className = 'bg-gradient-to-r from-purple-100 to-purple-200 text-purple-800 px-3 py-1 rounded-xl text-xs font-bold';
            } else {
                statusElement.innerHTML = '<i class="fas fa-circle mr-2 text-yellow-500"></i> BASIC MODE';
                statusElement.className = 'bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-800 px-4 py-2 rounded-full text-sm font-bold';
                modeElement.textContent = 'BASIC AI';
                modeElement.className = 'bg-yellow-100 text-yellow-800 px-3 py-1 rounded text-xs font-medium';
            }
        }

        // Advanced chat functionality
        async function sendMessage() {
            const userInput = document.getElementById('userInput');
            const message = userInput.value.trim();
            
            if (message === '') return;
            
            // Add user message to chat
            addMessage(message, 'user');
            conversationHistory.push({ role: 'user', content: message });
            clearInput();
            
            // Update message count
            updateMessageCount();
            
            // Show typing indicator with enhanced animation
            showTypingIndicator();
            
            // Determine response mode based on content
            determineResponseMode(message);
            
            try {
                let response;
                
                if (useOpenAI && apiKey) {
                    response = await getOpenAIResponse(message);
                } else {
                    response = getAdvancedResponse(message);
                    await new Promise(resolve => setTimeout(resolve, 1500 + Math.random() * 1000));
                }
                
                removeTypingIndicator();
                addMessage(response, 'bot');
                conversationHistory.push({ role: 'assistant', content: response });
                
                saveConversationHistory();
                
            } catch (error) {
                removeTypingIndicator();
                handleEnhancedError(error);
            }
        }

        function determineResponseMode(message) {
            const msg = message.toLowerCase();
            if (msg.includes('pelajaran') || msg.includes('sekolah') || msg.includes('kuliah') || 
                msg.includes('matematika') || msg.includes('fisika') || msg.includes('kimia')) {
                currentMode = 'education';
            } else if (msg.includes('code') || msg.includes('program') || msg.includes('develop') || 
                       msg.includes('server') || msg.includes('tech')) {
                currentMode = 'technology';
            } else if (msg.includes('jual') || msg.includes('bisnis') || msg.includes('customer') || 
                       msg.includes('support') || msg.includes('nazama')) {
                currentMode = 'business';
            } else {
                currentMode = 'general';
            }
        }

        async function getOpenAIResponse(userMessage) {
            const messages = [
                { role: "system", content: CONFIG.systemPrompts[currentMode] },
                ...conversationHistory.slice(-12),
                { role: "user", content: userMessage }
            ];

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: CONFIG.openAI.model,
                    messages: messages,
                    temperature: CONFIG.openAI.temperature,
                    max_tokens: CONFIG.openAI.max_tokens
                })
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error?.message || 'OpenAI API error');
            }

            const data = await response.json();
            return data.choices[0].message.content;
        }

        function getAdvancedResponse(userMessage) {
            // This would contain extensive knowledge base responses
            // For now, using a placeholder that suggests using OpenAI
            return `**🤖 Mode Basic AI**

Saya memahami pertanyaan Anda tentang "${userMessage}". 

Untuk memberikan jawaban yang super akurat dan komprehensif dengan akses ke pengetahuan terbaru, saya sangat merekomendasikan untuk mengaktifkan **OpenAI GPT-4** dengan API Key.

**🎯 Dengan OpenAI, saya dapat:**
- Memberikan jawaban detail dengan referensi terkini
- Menyediakan code examples yang tepat
- Memberikan penjelasan educational yang mendalam
- Menyelesaikan masalah teknis yang kompleks
- Akses ke database pengetahuan terbaru

**🔑 Cara aktivasi:**
1. Dapatkan API Key dari [platform.openai.com](https://platform.openai.com/api-keys)
2. Klik tombol "API Key" di header
3. Masukkan key Anda
4. Nikmati kemampuan AI super cerdas!

Sementara itu, saya akan coba membantu dengan pengetahuan dasar yang saya miliki...`;
        }

        function handleSuggestion(suggestion) {
            document.getElementById('userInput').value = suggestion;
            document.getElementById('userInput').focus();
            autoResizeTextarea(document.getElementById('userInput'));
            document.getElementById('userInput').scrollIntoView({ behavior: 'smooth' });
        }

        function handleEnhancedError(error) {
            console.error('Super AI Error:', error);
            
            let errorMessage = "⚠️ **System Error**\n\n";
            
            if (error.message.includes('quota') || error.message.includes('limit')) {
                errorMessage += "API quota mungkin habis atau mencapai limit. Silakan cek dashboard OpenAI.\n\n";
            } else if (error.message.includes('invalid') || error.message.includes('auth')) {
                errorMessage += "API key tidak valid atau authentication error. Silakan periksa kembali API key Anda.\n\n";
            } else if (error.message.includes('network')) {
                errorMessage += "Network connection error. Silakan cek koneksi internet Anda.\n\n";
            } else {
                errorMessage += "Terjadi error system. Silakan coba lagi dalam beberapa saat.\n\n";
            }
            
            errorMessage += "**🔄 Solusi:**\n";
            errorMessage += "- Cek API Key di platform.openai.com\n";
            errorMessage += "- Pastikan quota masih tersedia\n";
            errorMessage += "- Coba gunakan mode basic sementara\n";
            errorMessage += "- Hubungi support jika berlanjut\n";
            
            addMessage(errorMessage, 'bot');
        }

        // Enhanced UI Utilities
        function addMessage(text, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            if (sender === 'bot') {
                messageDiv.innerHTML = `<div class="markdown-content">${formatEnhancedMarkdown(text)}</div>`;
            } else {
                messageDiv.textContent = text;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function formatEnhancedMarkdown(text) {
            // Enhanced markdown processing with more features
            return text
                .replace(/
